import{d as a}from"./pinia-b4aeb200.js";import{r}from"./index-60949b5a.js";import{m as s}from"./ant-design-vue-01be3039.js";const l=()=>r.get("/file"),o=e=>r.post("/file/insert",e),n=(e,t)=>r.get(`/file/delete/${e}/${t}`),u=a("file",{state:()=>({fileList:[],name:"",uploadList:[],url:"",visible:!1}),actions:{clear(){this.url="",this.name="",this.uploadList=[]},async insertFile(){if(this.url===""){s.error("\u8BF7\u4E0A\u4F20\u6587\u4EF6");return}if(this.name===""){s.error("\u8BF7\u8F93\u5165\u6587\u4EF6\u540D");return}const e=await o({name:this.name,url:this.url});e.code===1?(s.success(e.message),this.getFileList(),this.visible=!1,this.clear()):s.error(e.message)},async getFileList(){const e=await l();e.code===1&&(this.fileList=e.data)},handleChange(e){const t=e.file.status;t==="done"&&(s.success(`${e.file.name} \u6587\u4EF6\u4E0A\u4F20\u6210\u529F`),this.url=e.fileList[0].response.data.url),t==="error"&&s.error(`${e.file.name} \u6587\u4EF6\u4E0A\u4F20\u5931\u8D25`),t==="removed"&&(s.info(`${e.file.name} \u6587\u4EF6\u79FB\u9664\u6210\u529F`),this.url="")},async delete(e,t){const i=await n(e,t.split("/")[2]);i.code===1?(s.success(i.message),this.getFileList()):s.error(i.message)},download(e){window.open(e)}}});export{u};
